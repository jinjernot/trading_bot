<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading Bot Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='dashboard.css') }}">

</head>

<body class="text-gray-100">
    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <!-- Header -->
        <header class="mb-12 fade-in">
            <div class="flex items-center justify-between mb-8">
                <div>
                    <h1
                        class="text-5xl font-bold mb-2 glow-text bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent">
                        Trading Bot Dashboard
                    </h1>
                    <p class="text-gray-400">Real-time performance monitoring</p>
                </div>
                <div class="flex items-center gap-2">
                    <div class="w-3 h-3 bg-green-400 rounded-full pulse-dot"></div>
                    <span class="text-sm text-gray-400">Live</span>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="gradient-card p-6 rounded-2xl">
                    <div class="text-gray-400 text-sm font-medium mb-2">Account Balance</div>
                    <div id="balance"
                        class="text-3xl font-bold bg-gradient-to-r from-green-400 to-emerald-400 bg-clip-text text-transparent">
                        Loading...
                    </div>
                </div>
                <div class="gradient-card p-6 rounded-2xl">
                    <div class="text-gray-400 text-sm font-medium mb-2">Active Positions</div>
                    <div id="active-count" class="text-3xl font-bold text-blue-400">-</div>
                </div>
                <div class="gradient-card p-6 rounded-2xl">
                    <div class="text-gray-400 text-sm font-medium mb-2">Total P&L</div>
                    <div id="total-pnl" class="text-3xl font-bold">-</div>
                </div>
            </div>
        </header>

        <!-- Performance Stats -->
        <section class="mb-12 fade-in" style="animation-delay: 0.1s">
            <h2
                class="text-3xl font-bold mb-6 bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent">
                Performance Metrics
            </h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                <div class="stat-card p-5 rounded-xl">
                    <div class="text-gray-400 text-xs font-semibold uppercase tracking-wide mb-2">Win Rate</div>
                    <div id="win-rate" class="text-2xl font-bold text-green-400">-</div>
                </div>
                <div class="stat-card p-5 rounded-xl">
                    <div class="text-gray-400 text-xs font-semibold uppercase tracking-wide mb-2">Total Trades</div>
                    <div id="total-trades" class="text-2xl font-bold text-blue-400">-</div>
                </div>
                <div class="stat-card p-5 rounded-xl">
                    <div class="text-gray-400 text-xs font-semibold uppercase tracking-wide mb-2">Avg Win</div>
                    <div id="avg-win" class="text-2xl font-bold text-green-400">-</div>
                </div>
                <div class="stat-card p-5 rounded-xl">
                    <div class="text-gray-400 text-xs font-semibold uppercase tracking-wide mb-2">Avg Loss</div>
                    <div id="avg-loss" class="text-2xl font-bold text-red-400">-</div>
                </div>
            </div>

            <!-- Equity Curve -->
            <div class="stat-card p-8 rounded-2xl">
                <h3 class="text-xl font-bold mb-6 text-gray-200">Equity Curve</h3>
                <canvas id="equity-chart" height="80"></canvas>
            </div>
        </section>

        <!-- Active Trades -->
        <section class="mb-12 fade-in" style="animation-delay: 0.2s">
            <h2
                class="text-3xl font-bold mb-6 bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">
                Active Trades
            </h2>
            <div class="stat-card rounded-2xl overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead>
                            <tr class="text-left text-xs font-semibold uppercase tracking-wider text-gray-400">
                                <th class="px-6 py-4">Symbol</th>
                                <th class="px-6 py-4">Side</th>
                                <th class="px-6 py-4 text-right">Size</th>
                                <th class="px-6 py-4 text-right">Entry</th>
                                <th class="px-6 py-4 text-right">Mark</th>
                                <th class="px-6 py-4 text-right">P&L</th>
                                <th class="px-6 py-4 text-right">ROI%</th>
                            </tr>
                        </thead>
                        <tbody id="active-trades-body" class="divide-y divide-gray-700/50">
                            <tr>
                                <td colspan="7" class="px-6 py-12 text-center text-gray-500">No active trades</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Trade History -->
        <section class="mb-12 fade-in" style="animation-delay: 0.3s">
            <h2
                class="text-3xl font-bold mb-6 bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent">
                Recent Closed Trades
            </h2>
            <div class="stat-card rounded-2xl overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead>
                            <tr class="text-left text-xs font-semibold uppercase tracking-wider text-gray-400">
                                <th class="px-6 py-4">Time</th>
                                <th class="px-6 py-4">Symbol</th>
                                <th class="px-6 py-4">Side</th>
                                <th class="px-6 py-4 text-right">Entry</th>
                                <th class="px-6 py-4 text-right">Exit</th>
                                <th class="px-6 py-4 text-right">P&L</th>
                                <th class="px-6 py-4 text-right">ROI%</th>
                                <th class="px-6 py-4">Exit Reason</th>
                            </tr>
                        </thead>
                        <tbody id="history-body" class="divide-y divide-gray-700/50">
                            <tr>
                                <td colspan="8" class="px-6 py-12 text-center text-gray-500">No trade history</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Rejected Signals -->
        <section class="fade-in" style="animation-delay: 0.4s">
            <h2
                class="text-3xl font-bold mb-6 bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent">
                Rejected Signals Analysis
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="stat-card p-8 rounded-2xl">
                    <h3 class="text-lg font-bold mb-6 text-gray-200">Top Rejection Reasons</h3>
                    <div id="rejection-reasons" class="space-y-3">
                        <div class="text-gray-500">Loading...</div>
                    </div>
                </div>
                <div class="stat-card p-8 rounded-2xl">
                    <h3 class="text-lg font-bold mb-6 text-gray-200">Recent Rejections (Last 10)</h3>
                    <div id="recent-rejections" class="space-y-3 text-sm">
                        <div class="text-gray-500">Loading...</div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script>
        let equityChart = null;

        async function fetchAll() {
            await Promise.all([
                fetchBalance(),
                fetchActiveTrades(),
                fetchPerformance(),
                fetchTradeHistory(),
                fetchRejections()
            ]);
        }

        async function fetchBalance() {
            const res = await fetch('/api/account-balance');
            const data = await res.json();
            document.getElementById('balance').textContent = `$${data.usdt_balance.toFixed(2)}`;
        }

        async function fetchActiveTrades() {
            const res = await fetch('/api/active-trades');
            const trades = await res.json();
            document.getElementById('active-count').textContent = trades.length;

            const tbody = document.getElementById('active-trades-body');
            if (trades.length === 0) {
                tbody.innerHTML = '<tr><td colspan="7" class="px-6 py-12 text-center text-gray-500">No active trades</td></tr>';
                return;
            }

            tbody.innerHTML = trades.map(t => {
                const side = t.position_amt > 0 ? 'LONG' : 'SHORT';
                const sideColor = side === 'LONG' ? 'text-green-400' : 'text-red-400';
                const pnlColor = t.unrealized_profit >= 0 ? 'text-green-400' : 'text-red-400';
                return `<tr class="border-b border-gray-700/50 hover:bg-gray-700/20">
                <td class="px-6 py-4 font-bold text-white">${t.symbol}</td>
                <td class="px-6 py-4 ${sideColor} font-bold">${side}</td>
                <td class="px-6 py-4 text-right text-gray-300">${Math.abs(t.position_amt).toFixed(3)}</td>
                <td class="px-6 py-4 text-right text-gray-300">$${t.entry_price.toFixed(4)}</td>
                <td class="px-6 py-4 text-right text-gray-300">$${t.mark_price.toFixed(4)}</td>
                <td class="px-6 py-4 text-right ${pnlColor} font-bold">$${t.unrealized_profit.toFixed(2)}</td>
                <td class="px-6 py-4 text-right ${pnlColor} font-bold">${t.roi.toFixed(2)}%</td>
            </tr>`;
            }).join('');
        }

        async function fetchPerformance() {
            const res = await fetch('/api/performance');
            const data = await res.json();

            if (data.message) {
                document.getElementById('total-pnl').textContent = data.message;
                return;
            }

            document.getElementById('total-pnl').textContent = `$${data.total_pnl}`;
            document.getElementById('total-pnl').className = `text-3xl font-bold ${data.total_pnl >= 0 ? 'text-green-400' : 'text-red-400'}`;
            document.getElementById('win-rate').textContent = `${data.win_rate}%`;
            document.getElementById('total-trades').textContent = data.total_trades;
            document.getElementById('avg-win').textContent = `$${data.avg_win}`;
            document.getElementById('avg-loss').textContent = `$${data.avg_loss}`;

            // Render equity curve
            if (data.equity_curve && data.equity_curve.length > 0) {
                const ctx = document.getElementById('equity-chart');
                if (equityChart) equityChart.destroy();

                equityChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: data.equity_curve.map(d => new Date(d.Timestamp).toLocaleString()),
                        datasets: [{
                            label: 'Cumulative P&L',
                            data: data.equity_curve.map(d => d.cumulative_pnl),
                            borderColor: '#22c55e',
                            backgroundColor: 'rgba(34, 197, 94, 0.1)',
                            tension: 0.4,
                            fill: true,
                            pointRadius: 3,
                            pointHoverRadius: 6,
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                backgroundColor: 'rgba(15, 23, 42, 0.9)',
                                padding: 12,
                                titleColor: '#f1f5f9',
                                bodyColor: '#e2e8f0',
                                borderColor: 'rgba(59, 130, 246, 0.5)',
                                borderWidth: 1
                            }
                        },
                        scales: {
                            x: {
                                grid: { color: 'rgba(148, 163, 184, 0.1)' },
                                ticks: { color: '#94a3b8' }
                            },
                            y: {
                                grid: { color: 'rgba(148, 163, 184, 0.1)' },
                                ticks: {
                                    color: '#94a3b8',
                                    callback: value => '$' + value.toFixed(2)
                                }
                            }
                        }
                    }
                });
            }
        }

        async function fetchTradeHistory() {
            const res = await fetch('/api/trade-history');
            const data = await res.json();

            const tbody = document.getElementById('history-body');
            if (!data.trades || data.trades.length === 0) {
                tbody.innerHTML = '<tr><td colspan="8" class="px-6 py-12 text-center text-gray-500">No trade history</td></tr>';
                return;
            }

            tbody.innerHTML = data.trades.slice(-20).reverse().map(t => {
                const pnlColor = t.pnl >= 0 ? 'text-green-400' : 'text-red-400';
                const sideColor = t.side === 'LONG' ? 'text-green-400' : 'text-red-400';
                return `<tr class="border-b border-gray-700/50 hover:bg-gray-700/20">
                <td class="px-6 py-4 text-sm text-gray-400">${new Date(t.timestamp).toLocaleString()}</td>
                <td class="px-6 py-4 font-bold text-white">${t.symbol}</td>
                <td class="px-6 py-4 ${sideColor} font-semibold">${t.side}</td>
                <td class="px-6 py-4 text-right text-gray-300">$${t.entry_price.toFixed(4)}</td>
                <td class="px-6 py-4 text-right text-gray-300">$${t.exit_price.toFixed(4)}</td>
                <td class="px-6 py-4 text-right ${pnlColor} font-bold">$${t.pnl.toFixed(2)}</td>
                <td class="px-6 py-4 text-right ${pnlColor} font-bold">${t.roi.toFixed(2)}%</td>
                <td class="px-6 py-4 text-sm text-gray-400">${t.exit_reason}</td>
            </tr>`;
            }).join('');
        }

        async function fetchRejections() {
            const res = await fetch('/api/rejected-signals');
            const data = await res.json();

            // Top reasons
            const reasonsDiv = document.getElementById('rejection-reasons');
            if (data.reason_counts && Object.keys(data.reason_counts).length > 0) {
                reasonsDiv.innerHTML = Object.entries(data.reason_counts)
                    .slice(0, 5)
                    .map(([reason, count]) => `
                    <div class="flex justify-between items-center p-3 bg-gray-700/30 rounded-lg hover:bg-gray-700/50 transition">
                        <span class="text-sm text-gray-300">${reason}</span>
                        <span class="bg-blue-500/20 text-blue-400 px-3 py-1 rounded-full text-xs font-semibold">${count}</span>
                    </div>
                `).join('');
            } else {
                reasonsDiv.innerHTML = '<div class="text-gray-500">No rejections yet</div>';
            }

            // Recent rejections
            const recentDiv = document.getElementById('recent-rejections');
            if (data.signals && data.signals.length > 0) {
                recentDiv.innerHTML = data.signals.slice(-10).reverse().map(s => `
                <div class="p-3 border-l-2 border-yellow-500 bg-yellow-500/5 rounded-r-lg hover:bg-yellow-500/10 transition">
                    <div class="font-semibold text-white">${s.Symbol} ${s.Attempted_Side}</div>
                    <div class="text-xs text-gray-400 mt-1">${s.Rejection_Reason}</div>
                </div>
            `).join('');
            } else {
                recentDiv.innerHTML = '<div class="text-gray-500">No rejections yet</div>';
            }
        }

        // Initial load and refresh
        fetchAll();
        setInterval(fetchAll, 30000); // Refresh every 30s
    </script>
</body>

</html>

<!-- Performance Stats -->
<section class="mb-8">
    <h2 class="text-2xl font-bold mb-4">Performance Metrics</h2>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
        <div class="bg-gray-800 p-4 rounded-lg">
            <div class="text-gray-400 text-sm">Win Rate</div>
            <div id="win-rate" class="text-xl font-bold text-green-400">-</div>
        </div>
        <div class="bg-gray-800 p-4 rounded-lg">
            <div class="text-gray-400 text-sm">Total Trades</div>
            <div id="total-trades" class="text-xl font-bold">-</div>
        </div>
        <div class="bg-gray-800 p-4 rounded-lg">
            <div class="text-gray-400 text-sm">Avg Win</div>
            <div id="avg-win" class="text-xl font-bold text-green-400">-</div>
        </div>
        <div class="bg-gray-800 p-4 rounded-lg">
            <div class="text-gray-400 text-sm">Avg Loss</div>
            <div id="avg-loss" class="text-xl font-bold text-red-400">-</div>
        </div>
    </div>

    <!-- Equity Curve -->
    <div class="bg-gray-800 p-6 rounded-lg">
        <h3 class="text-xl font-bold mb-4">Equity Curve</h3>
        <canvas id="equity-chart" height="80"></canvas>
    </div>
</section>

<!-- Active Trades -->
<section class="mb-8">
    <h2 class="text-2xl font-bold mb-4">Active Trades</h2>
    <div class="bg-gray-800 rounded-lg overflow-hidden">
        <table class="w-full">
            <thead class="bg-gray-700">
                <tr>
                    <th class="px-4 py-3 text-left">Symbol</th>
                    <th class="px-4 py-3 text-left">Side</th>
                    <th class="px-4 py-3 text-right">Size</th>
                    <th class="px-4 py-3 text-right">Entry</th>
                    <th class="px-4 py-3 text-right">Mark</th>
                    <th class="px-4 py-3 text-right">PnL</th>
                    <th class="px-4 py-3 text-right">ROI%</th>
                </tr>
            </thead>
            <tbody id="active-trades-body" class="divide-y divide-gray-700">
                <tr>
                    <td colspan="7" class="px-4 py-8 text-center text-gray-400">No active trades</td>
                </tr>
            </tbody>
        </table>
    </div>
</section>

<!-- Trade History -->
<section class="mb-8">
    <h2 class="text-2xl font-bold mb-4">Recent Closed Trades</h2>
    <div class="bg-gray-800 rounded-lg overflow-hidden">
        <table class="w-full">
            <thead class="bg-gray-700">
                <tr>
                    <th class="px-4 py-3 text-left">Time</th>
                    <th class="px-4 py-3 text-left">Symbol</th>
                    <th class="px-4 py-3 text-left">Side</th>
                    <th class="px-4 py-3 text-right">Entry</th>
                    <th class="px-4 py-3 text-right">Exit</th>
                    <th class="px-4 py-3 text-right">PnL</th>
                    <th class="px-4 py-3 text-right">ROI%</th>
                    <th class="px-4 py-3 text-left">Reason</th>
                </tr>
            </thead>
            <tbody id="history-body" class="divide-y divide-gray-700">
                <tr>
                    <td colspan="8" class="px-4 py-8 text-center text-gray-400">No trade history</td>
                </tr>
            </tbody>
        </table>
    </div>
</section>

<!-- Rejected Signals -->
<section>
    <h2 class="text-2xl font-bold mb-4">Rejected Signals Analysis</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="bg-gray-800 p-6 rounded-lg">
            <h3 class="text-lg font-bold mb-4">Top Rejection Reasons</h3>
            <div id="rejection-reasons" class="space-y-2">
                <div class="text-gray-400">Loading...</div>
            </div>
        </div>
        <div class="bg-gray-800 p-6 rounded-lg">
            <h3 class="text-lg font-bold mb-4">Recent Rejections (Last 10)</h3>
            <div id="recent-rejections" class="space-y-2 text-sm">
                <div class="text-gray-400">Loading...</div>
            </div>
        </div>
    </div>
</section>
</div>

<script>
    let equityChart = null;

    async function fetchAll() {
        await Promise.all([
            fetchBalance(),
            fetchActiveTrades(),
            fetchPerformance(),
            fetchTradeHistory(),
            fetchRejections()
        ]);
    }

    async function fetchBalance() {
        const res = await fetch('/api/account-balance');
        const data = await res.json();
        document.getElementById('balance').textContent = `$${data.usdt_balance.toFixed(2)}`;
    }

    async function fetchActiveTrades() {
        const res = await fetch('/api/active-trades');
        const trades = await res.json();
        document.getElementById('active-count').textContent = trades.length;

        const tbody = document.getElementById('active-trades-body');
        if (trades.length === 0) {
            tbody.innerHTML = '<tr><td colspan="7" class="px-4 py-8 text-center text-gray-400">No active trades</td></tr>';
            return;
        }

        tbody.innerHTML = trades.map(t => {
            const side = t.position_amt > 0 ? 'LONG' : 'SHORT';
            const sideColor = side === 'LONG' ? 'text-green-400' : 'text-red-400';
            const pnlColor = t.unrealized_profit >= 0 ? 'text-green-400' : 'text-red-400';
            return `<tr>
                <td class="px-4 py-3 font-bold">${t.symbol}</td>
                <td class="px-4 py-3 ${sideColor} font-bold">${side}</td>
                <td class="px-4 py-3 text-right">${Math.abs(t.position_amt).toFixed(3)}</td>
                <td class="px-4 py-3 text-right">$${t.entry_price.toFixed(4)}</td>
                <td class="px-4 py-3 text-right">$${t.mark_price.toFixed(4)}</td>
                <td class="px-4 py-3 text-right ${pnlColor} font-bold">$${t.unrealized_profit.toFixed(2)}</td>
                <td class="px-4 py-3 text-right ${pnlColor} font-bold">${t.roi.toFixed(2)}%</td>
            </tr>`;
        }).join('');
    }

    async function fetchPerformance() {
        const res = await fetch('/api/performance');
        const data = await res.json();

        if (data.message) {
            document.getElementById('total-pnl').textContent = data.message;
            return;
        }

        document.getElementById('total-pnl').textContent = `$${data.total_pnl}`;
        document.getElementById('total-pnl').className = `text-2xl font-bold ${data.total_pnl >= 0 ? 'text-green-400' : 'text-red-400'}`;
        document.getElementById('win-rate').textContent = `${data.win_rate}%`;
        document.getElementById('total-trades').textContent = data.total_trades;
        document.getElementById('avg-win').textContent = `$${data.avg_win}`;
        document.getElementById('avg-loss').textContent = `$${data.avg_loss}`;

        // Render equity curve
        if (data.equity_curve && data.equity_curve.length > 0) {
            const ctx = document.getElementById('equity-chart');
            if (equityChart) equityChart.destroy();

            equityChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.equity_curve.map(d => new Date(d.Timestamp).toLocaleString()),
                    datasets: [{
                        label: 'Cumulative PnL',
                        data: data.equity_curve.map(d => d.cumulative_pnl),
                        borderColor: '#22c55e',
                        backgroundColor: 'rgba(34, 197, 94, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } }
                }
            });
        }
    }

    async function fetchTradeHistory() {
        const res = await fetch('/api/trade-history');
        const data = await res.json();

        const tbody = document.getElementById('history-body');
        if (!data.trades || data.trades.length === 0) {
            tbody.innerHTML = '<tr><td colspan="8" class="px-4 py-8 text-center text-gray-400">No trade history</td></tr>';
            return;
        }

        tbody.innerHTML = data.trades.slice(-20).reverse().map(t => {
            const pnlColor = t.pnl >= 0 ? 'text-green-400' : 'text-red-400';
            const sideColor = t.side === 'LONG' ? 'text-green-400' : 'text-red-400';
            return `<tr>
                <td class="px-4 py-3 text-sm">${new Date(t.timestamp).toLocaleString()}</td>
                <td class="px-4 py-3 font-bold">${t.symbol}</td>
                <td class="px-4 py-3 ${sideColor}">${t.side}</td>
                <td class="px-4 py-3 text-right">$${t.entry_price.toFixed(4)}</td>
                <td class="px-4 py-3 text-right">$${t.exit_price.toFixed(4)}</td>
                <td class="px-4 py-3 text-right ${pnlColor} font-bold">$${t.pnl.toFixed(2)}</td>
                <td class="px-4 py-3 text-right ${pnlColor} font-bold">${t.roi.toFixed(2)}%</td>
                <td class="px-4 py-3 text-sm text-gray-400">${t.exit_reason}</td>
            </tr>`;
        }).join('');
    }

    async function fetchRejections() {
        const res = await fetch('/api/rejected-signals');
        const data = await res.json();

        // Top reasons
        const reasonsDiv = document.getElementById('rejection-reasons');
        if (data.reason_counts && Object.keys(data.reason_counts).length > 0) {
            reasonsDiv.innerHTML = Object.entries(data.reason_counts)
                .slice(0, 5)
                .map(([reason, count]) => `
                    <div class="flex justify-between items-center">
                        <span class="text-sm">${reason}</span>
                        <span class="bg-gray-700 px-2 py-1 rounded text-xs">${count}</span>
                    </div>
                `).join('');
        } else {
            reasonsDiv.innerHTML = '<div class="text-gray-400">No rejections yet</div>';
        }

        // Recent rejections
        const recentDiv = document.getElementById('recent-rejections');
        if (data.signals && data.signals.length > 0) {
            recentDiv.innerHTML = data.signals.slice(-10).reverse().map(s => `
                <div class="border-l-2 border-yellow-500 pl-2">
                    <div class="font-bold">${s.Symbol} ${s.Attempted_Side}</div>
                    <div class="text-gray-400">${s.Rejection_Reason}</div>
                </div>
            `).join('');
        } else {
            recentDiv.innerHTML = '<div class="text-gray-400">No rejections yet</div>';
        }
    }

    // Initial load and refresh
    fetchAll();
    setInterval(fetchAll, 30000); // Refresh every 30s
</script>
</body>

</html>